"""
阿瓦隆游戏整合常量定义
"""

# 游戏基本规则
GAME_RULES = {
    "mission_count": 5,  # 总任务数
    "required_players": 5,  # 最小玩家数
    "max_players": 10,  # 最大玩家数
    "success_threshold": 3,  # 获胜所需成功任务数
    "fail_threshold": 3,  # 失败所需失败任务数
    "team_vote_limit": 5,  # 队伍投票上限
}

# 任务配置（根据玩家数量）
MISSION_CONFIGS = {
    5: {
        'missions': [2, 3, 2, 3, 3],
        'fails_needed': [1, 1, 1, 1, 1]
    },
    6: {
        'missions': [2, 3, 4, 3, 4],
        'fails_needed': [1, 1, 1, 1, 1]
    },
    7: {
        'missions': [2, 3, 3, 4, 4],
        'fails_needed': [1, 1, 1, 2, 1]
    },
    8: {
        'missions': [3, 4, 4, 5, 5],
        'fails_needed': [1, 1, 1, 2, 1]
    },
    9: {
        'missions': [3, 4, 4, 5, 5],
        'fails_needed': [1, 1, 1, 2, 1]
    },
    10: {
        'missions': [3, 4, 4, 5, 5],
        'fails_needed': [1, 1, 1, 2, 1]
    }
}

# 游戏角色
ROLES = {
    # 好人阵营
    "merlin": {
        "name": "梅林",
        "team": "good",
        "description": "能看到除了莫德雷德之外的所有坏人",
        "abilities": ["知道坏人身份(除莫德雷德)"],
        "strategy_tips": [
            "隐藏自己的身份，避免任何形式的身份暴露，也不要透露自己有视野能看到别人的身份",
            "假装自己很愚蠢，看不到各位的身份，保护自己不被刺杀",
            "在关键时刻用逻辑推理、暗示等方式引导好人方走向胜利",
            "可以指认坏人的身份，但是要说出你的理由，并且理由来自其他人的可疑发言或者前面某次失败的任务",
            "忠诚和派西维尔是你的队友，如果他们自称梅林，其实是在保护你，防止你被刺客刺杀。遇到这种情况你只需要顺着他的意图即可",
            "通过间接方式引导好人识别坏人，但又要防止坏人识别出你的身份",
            "如果当前是优势局，比如成功的任务相比失败的任务多，你可以选择假扮忠诚或者派西维尔，没必要使用梅林的视野"
        ]
    },
    "percival": {
        "name": "派西维尔",
        "team": "good",
        "description": "能看到梅林和莫甘娜",
        "abilities": ["识别梅林和莫甘娜"],
        "strategy_tips": [
            "观察梅林和莫甘娜的行为差异",
            "尝试保护疑似梅林的玩家",
            "尽量反对不包含自己的队伍，除非你有把握这个任务能成功",
            "可以指认坏人的身份，但是要说出你的理由，并且理由来自其他人的可疑发言或者前面某次失败的任务",
            "倾向于做任务时，既不同意选择莫甘娜也不选择梅林，以防止梅林身份信息暴露（但是不要说出来）",
            "不要说出梅林和莫甘娜的位置，因为坏人可以通过这个信息准确刺杀梅林",
            "在任务中亮明自己身份有助于好人阵营的胜利",
        ]
    },
    "loyal_servant": {
        "name": "忠臣",
        "team": "good",
        "description": "普通的好人",
        "abilities": [],
        "strategy_tips": [
            "仔细观察其他玩家的发言和行为",
            "跟随可信玩家的建议，如派西维尔的建议",
            "尽量反对不包含自己的队伍，除非队伍里有派西维尔，或你有其他证据有把握这个任务能成功",
            "在任务中隐藏自己的身份",
            "根据局势判断：可以伪装成梅林，保护其不被刺客刺杀；也可以伪装成派西维尔，如果你能看出一些身份；或者直接按照忠诚玩，取得派西维尔的信任",
            "勇敢指认坏人的身份，可以说明理由，也可以不说明理由（这样更像梅林）",
            "声称自己是梅林或者派西维尔，干扰坏人阵营的身份判断",
        ]
    },

    # 坏人阵营
    "morgana": {
        "name": "莫甘娜",
        "team": "evil",
        "description": "坏人，派西维尔会看到你",
        "abilities": ["伪装成梅林"],
        "strategy_tips": [
            "模仿梅林的行为，但不要太完美",
            "误导派西维尔让他相信你是梅林",
            "忽悠好人做任务时带上你自己或者你的坏人队友，然后破坏任务",
            "当自己成为队长选择队伍时，尽量保证队伍中至少有一个还没暴露身份的坏人（这个坏人可以是自己）",
            "伪装成好人，例如暗示自己是梅林、派西维尔或忠臣，让别人做任务时带上你，然后破坏任务",
            "反对不包含自己的任务，除非队伍中有其他坏人",
            "在发言中隐藏自己的身份，做任务时破坏任务"
        ]
    },
    "assassin": {
        "name": "刺客",
        "team": "evil",
        "description": "坏人，游戏结束后可以刺杀梅林",
        "abilities": ["刺杀梅林"],
        "strategy_tips": [
            "观察谁可能是梅林",
            "在游戏后期选择合适的时机刺杀",
            "隐藏自己的身份，不要太明显地暗示自己是刺客",
            "伪装成好人，例如派西维尔、忠臣或暗示自己是梅林，让别人做任务时带上你，然后破坏任务",
            "忽悠好人做任务时带上你自己或者你的坏人队友，然后破坏任务",
            "当自己成为队长选择队伍时，尽量保证队伍中至少有一个还没暴露身份的坏人（这个坏人可以是自己）",
            "如果好人阵营中有人在没有任何证据的情况下指认所有坏人，或者做任务时不带上坏人，则他是梅林的概率较高",
            "反对不包含自己的任务，除非队伍中有其他坏人",
            "在任务中隐藏自己的身份"
        ]
    },
    "mordred": {
        "name": "莫德雷德",
        "team": "evil",
        "description": "坏人，梅林看不到你",
        "abilities": ["对梅林隐身"],
        "strategy_tips": [
            "利用自己对梅林隐身的优势",
            "大胆地参与游戏，因为梅林无法识别你",
            "忽悠好人做任务时带上你自己或者你的坏人队友，然后破坏任务",
            "当自己成为队长选择队伍时，尽量保证队伍中至少有一个还没暴露身份的坏人（这个坏人可以是自己）",
            "反对不包含自己的任务，除非队伍中有其他坏人",
            "在任务中隐藏自己的身份"
        ]
    },
    "minion": {
        "name": "爪牙",
        "team": "evil",
        "description": "普通坏人",
        "abilities": ["知道其他坏人身份(除奥伯伦)"],
        "strategy_tips": [
            "支持其他坏人的行动",
            "伪装成好人，例如派西维尔、忠臣或暗示自己是梅林，让别人做任务时带上你，然后破坏任务",
            "忽悠好人做任务时带上你自己或者你的坏人队友，然后破坏任务",
            "当自己成为队长选择队伍时，尽量保证队伍中至少有一个还没暴露身份的坏人（这个坏人可以是自己）",
            "反对不包含自己的任务，除非队伍中有其他坏人",
            "在任务中隐藏自己的身份人"
        ]
    },
    "oberon": {
        "name": "奥伯伦",
        "team": "evil",
        "description": "坏人，但其他坏人不知道你的身份",
        "abilities": [],
        "strategy_tips": [
            "破坏任务但不暴露自己",
            "伪装成好人，例如派西维尔、忠臣或暗示自己是梅林，让别人做任务时带上你，然后破坏任务",
            "忽悠好人做任务时带上你自己或者你的坏人队友，然后破坏任务",
            "当自己成为队长选择队伍时，尽量保证队伍中至少有一个还没暴露身份的坏人（这个坏人可以是自己）",
            "反对不包含自己的任务，除非队伍中有其他坏人",
            "尝试识别其他坏人"
        ]
    }
}

# 游戏阶段
GAME_PHASES = {
    'init': '初始化',
    'role_assignment': '分配角色',
    'secret_info': '传递秘密信息',
    'team_selection': '选择队伍',
    'team_vote': '队伍投票',
    'mission_vote': '任务投票',
    'mission_result': '任务结果',
    'assassination': '刺杀阶段',
    'game_end': '游戏结束'
}

# 游戏状态
GAME_STATES = {
    'waiting': '等待开始',
    'playing': '游戏进行中',
    'finished': '游戏结束'
}

# 角色分配规则（根据玩家数量）
ROLE_ASSIGNMENT = {
    5: ["merlin", "percival", "loyal_servant", "morgana", "assassin"],
    6: ["merlin", "percival", "loyal_servant", "morgana", "assassin", "minion"],
    7: ["merlin", "percival", "loyal_servant", "morgana", "assassin", "mordred", "minion"],
    8: ["merlin", "percival", "loyal_servant", "loyal_servant", "morgana", "assassin", "mordred", "minion"],
    9: ["merlin", "percival", "loyal_servant", "loyal_servant", "morgana", "assassin", "mordred", "minion", "oberon"],
    10: ["merlin", "percival", "loyal_servant", "loyal_servant", "loyal_servant", "morgana", "assassin", "mordred", "minion", "oberon"]
}

# 投票规则
VOTE_RULES = {
    "team": {
        "approve": "赞成这个队伍执行任务",
        "reject": "反对这个队伍执行任务"
    },
    "mission": {
        "success": "让任务成功（好人应该总是选择这个）",
        "fail": "让任务失败（坏人可以选择这个）"
    }
}